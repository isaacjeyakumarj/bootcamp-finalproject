{% load static %}
<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta content="width=device-width, initial-scale=1.0" name="viewport">
  <title>Single Post - ZenBlog Bootstrap Template</title>
  <meta name="description" content="">
  <meta name="keywords" content="">

  <!-- Favicons -->
  <link href="{% static 'img/favicon.png'%}" rel="icon">
  <link href="{% static 'img/apple-touch-icon.png'%}" rel="apple-touch-icon">

  <!-- Fonts -->
  <link href="https://fonts.googleapis.com" rel="preconnect">
  <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@100;200;300;400;500;600;700;800;900&family=EB+Garamond:ital,wght@0,400;0,500;0,600;0,700;0,800&display=swap" rel="stylesheet">

  <!-- Vendor CSS Files -->
  <link href="{% static 'vendor/bootstrap/css/bootstrap.min.css'%}" rel="stylesheet">
  <link href="{% static 'vendor/bootstrap-icons/bootstrap-icons.css'%}" rel="stylesheet">
  <link href="{% static 'vendor/aos/aos.css'%}" rel="stylesheet">
  <link href="{% static 'vendor/swiper/swiper-bundle.min.css'%}" rel="stylesheet">

  <!-- Main CSS File -->
  <link href="{% static 'css/main.css'%}" rel="stylesheet">

  <!-- =======================================================
  * Template Name: ZenBlog
  * Template URL: https://bootstrapmade.com/zenblog-bootstrap-blog-template/
  * Updated: Aug 08 2024 with Bootstrap v5.3.3
  * Author: BootstrapMade.com
  * License: https://bootstrapmade.com/license/
  ======================================================== -->
</head>

<body class="single-post-page">

  <header id="header" class="header d-flex align-items-center sticky-top">
    <div class="container position-relative d-flex align-items-center justify-content-between">

      <a href="index.html" class="logo d-flex align-items-center me-auto me-xl-0">
        <img src="{% static  'img/Elsevier_logo_1.png'%}" alt="">
        <h1 class="sitename">Elsevier Spotlight</h1>
      </a>

      <nav id="navmenu" class="navmenu">
        <ul>
          <li><a href="{% url 'home'%}" class="active">Home</a></li>
          <li><a href="{% url 'about'%}">About</a></li>
          <li><a href="{% url 'topblog'%}">Top Blogs</a></li>
          <li class="dropdown"><a href="{% url 'categories'%}"><span>Categories</span> <i class="bi bi-chevron-down toggle-dropdown"></i></a>
            <ul>
              <li><a href="{% url 'a_g'%}">Academic & Government</a></li>
              <li><a href="{% url 'health'%}">Health</a></li>
              <li><a href="{% url 'industry'%}">Industry</a></li>
            </ul>
          </li>
          <li><a href="{% url 'contact'%}">Contact</a></li>
        </ul>
        <i class="mobile-nav-toggle d-xl-none bi bi-list"></i>
      </nav>

      <div class="header-social-links">
        <a href="#" class="twitter"><i class="bi bi-twitter-x"></i></a>
        <a href="#" class="facebook"><i class="bi bi-facebook"></i></a>
        <a href="#" class="instagram"><i class="bi bi-instagram"></i></a>
        <a href="#" class="linkedin"><i class="bi bi-linkedin"></i></a>
      </div>

    </div>
    <style>
      /* Comments Section Styles */
.comments-section {
    background-color: #fff4f4; /* Light background color */
    border-radius: 8px;
    padding: 20px;
    margin-top: 30px;
    box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
}

.comments-section h2 {
    font-size: 24px;
    margin-bottom: 20px;
    color: #333;
}

.comments-section .comments {
    background-color: #fff;
    border-radius: 5px;
    padding: 15px;
    margin-bottom: 15px;
    border: 1px solid #ddd;
}

.comments-section .comments p {
    margin-bottom: 10px;
    color: #555;
}

.comments-section .font-weight-bold {
    color: #222;
}

.comments-section .text-muted {
    color: #888;
}

.comment-form {
    background-color: #fff4f4;
    padding: 20px;
    border-radius: 8px;
    margin-top: 20px;
    box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
}

.comment-form h3 {
    color: #333;
    margin-bottom: 15px;
}

.comment-form .form-control {
    background-color: #fff4f4;
    border: 1px solid #ddd;
}

.comment-form button {
    background-color:#ce8460;
    color: #fff4f4;
}
.like-dislike-buttons {
    margin-top: 15px;
}

.like-dislike-buttons .btn {
    margin-right: 10px;
}


    </style>
    <script>
      function likePost(postId) {
          fetch(`/like/${postId}/`, {
              method: 'POST',
              headers: {
                  'X-CSRFToken': '{{ csrf_token }}',
                  'Content-Type': 'application/json'
              },
              body: JSON.stringify({})
          })
          .then(response => response.json())
          .then(data => {
              document.getElementById('like-count').innerText = data.likes;
              document.getElementById('dislike-count').innerText = data.dislikes;
          });
      }
      
      function dislikePost(postId) {
          fetch(`/dislike/${postId}/`, {
              method: 'POST',
              headers: {
                  'X-CSRFToken': '{{ csrf_token }}',
                  'Content-Type': 'application/json'
              },
              body: JSON.stringify({})
          })
          .then(response => response.json())
          .then(data => {
              document.getElementById('like-count').innerText = data.likes;
              document.getElementById('dislike-count').innerText = data.dislikes;
          });
      }
      </script>
      
  </header>

  <main class="main">

    <!-- Page Title -->
    <div class="page-title">
      <div class="container d-lg-flex justify-content-between align-items-center">
        <h1 class="mb-2 mb-lg-0"><a href="{% url 'health'%}" style="font-size: 29px;">Health</a></h1>
        <nav class="breadcrumbs">
          <ol>
            <li><a href="{% url 'home'%}">Home</a></li>
            <li class="current">Blog</li>
          </ol>
        </nav>
      </div>
    </div><!-- End Page Title -->

    <div class="container">
      <div class="row">

        <div class="col-lg-8">

          <!-- Blog Details Section -->
          <section id="blog-details" class="blog-details section">
            <div class="container">

              <article class="article">

                <div class="post-img">
                  <img src="{{health.image.url}}" alt="" class="img-fluid">
                </div>

                <h2 class="title">{{ health.title }}</h2>

                <div class="meta-top">
                  <ul>
                    <li class="d-flex align-items-center"><i class="bi bi-person"></i> <a href="blog-details.html">{{ health.name }}</a></li>
                    <li class="d-flex align-items-center"><i class="bi bi-clock"></i> <a href="blog-details.html">{{ health.created_on }}</a></li>
                  </ul>
                </div><!-- End meta top -->

                <div class="content">
                  <p>{{health.content}}</p>
                </div><!-- End post content -->

                <div class="meta-bottom">
                  <i class="bi bi-folder"></i>
                  <ul class="cats">
                    <li><a href="#">{{health.categories}}</a></li>
                  </ul>

                  <i class="bi bi-tags"></i>
                  <ul class="tags">
                    <li><a href="#">"{{health.tags}}"</a></li>
                  </ul>
                  <!-- Like Button -->
                  <button class="btn btn-like" onclick="likePost({{ health.id }});" style="color:#465367;">
                    
                    üëç Like <span id="like-count-{{ health.id }}">{{ health.likes }}</span>
                </button>
                
                <!-- Dislike Button -->
                <button class="btn btn-dislike" onclick="dislikePost({{ health.id }});"style="color:#465367;">
                    üëé Dislike <span id="dislike-count-{{ health.id }}">{{ health.dislikes }}</span>
                </button>
                

<!-- JavaScript Functions -->
<script>
  function likePost(postId) {
      // Example AJAX call to like a post
      console.log("Liked post with ID:", postId);
      // Increment the like count (placeholder for actual functionality)
      let likeCountElement = document.getElementById(`like-count-${postId}`);
      let currentCount = parseInt(likeCountElement.textContent);
      likeCountElement.textContent = currentCount + 1;
  }

  function dislikePost(postId) {
      // Example AJAX call to dislike a post
      console.log("Disliked post with ID:", postId);
      // Increment the dislike count (placeholder for actual functionality)
      let dislikeCountElement = document.getElementById(`dislike-count-${postId}`);
      let currentCount = parseInt(dislikeCountElement.textContent);
      dislikeCountElement.textContent = currentCount + 1;
  }
</script>

                </div><!-- End meta bottom -->

              </article>

            </div>
          </section><!-- /Blog Details Section -->

          <!-- Comments Section Integration -->
          <div class="container">
            <div class="col-md-8 card mb-4 mt-3 comments-section">
                <div class="card-body">
                    <!-- Comments Section -->
                    <h2><i class="bi bi-chat"></i> {{ comments.count }} comments</h2>
                    {% for comment in comments %}
                    <div class="comments" style="padding: 10px;">
                        <p class="font-weight-bold"><i class="bi bi-person"></i>
                            {{ comment.name }}
                            <span class="text-muted font-weight-normal"><i class="bi bi-clock"></i>
                                {{ comment.created_on }}
                            </span>
                        </p>{{ comment.body | linebreaks }}
                    </div>
                    {% endfor %}
                </div>
            </div>
        
            <div class="col-md-8 card mb-4 mt-3 comment-form">
                <div class="card-body">
                    {% if new_comment %}
                    <div class="alert alert-success" role="alert">
                        Your comment is awaiting moderation
                    </div>
                    {% else %}
                    <h3>Leave a comment</h3>
                    <form method="post" style="margin-top: 1.3em;">
                        {% csrf_token %}
                        {{ comment_form.as_p }}
                        <button type="submit" class="btn btn-primary btn-lg">Submit</button>
                    </form>
                    {% endif %}
                </div>
            </div>
        </div>
        

  </main>

  <footer id="footer" class="footer dark-background">

    <div class="container footer-top">
      <div class="row gy-4">
        <div class="col-lg-4 col-md-6 footer-about">
          <a href="index.html" class="logo d-flex align-items-center">
            <span class="sitename">Elsevier Spotlight</span>
          </a>
          <div class="footer-contact pt-3">
            <p>A108 Adam Street</p>
            <p>New York, NY 535022</p>
            <p class="mt-3"><strong>Phone:</strong> <span>+1 5589 55488 55</span></p>
            <p><strong>Email:</strong> <span>info@example.com</span></p>
          </div>
          <div class="social-links d-flex mt-4">
            <a href=""><i class="bi bi-twitter-x"></i></a>
            <a href=""><i class="bi bi-facebook"></i></a>
            <a href=""><i class="bi bi-instagram"></i></a>
            <a href=""><i class="bi bi-linkedin"></i></a>
          </div>
        </div>

        <div class="col-lg-2 col-md-3 footer-links">
          <h4>Useful Links</h4>
          <ul>
            <li><a href="#">Home</a></li>
            <li><a href="#">About us</a></li>
            <li><a href="#">Services</a></li>
            <li><a href="#">Terms of service</a></li>
            <li><a href="#">Privacy policy</a></li>
          </ul>
        </div>

        <div class="col-lg-2 col-md-3 footer-links">
          <h4>Our Services</h4>
          <ul>
            <li><a href="#">Web Design</a></li>
            <li><a href="#">Web Development</a></li>
            <li><a href="#">Product Management</a></li>
            <li><a href="#">Marketing</a></li>
            <li><a href="#">Graphic Design</a></li>
          </ul>
        </div>

        <!-- <div class="col-lg-4 col-md-6 footer-newsletter">
          <h4>Our Newsletter</h4>
          <p>Subscribe to get the latest updates and information.</p>
          <form action="" method="post">
            <input type="email" name="email"><input type="submit" value="Subscribe">
          </form>
        </div> -->
      </div>
    </div>

    <div class="container mt-4">
      <div class="copyright">
        &copy; Copyright <strong><span>Elsevier Spotlight</span></strong>. All Rights Reserved
      </div>
      <div class="credits">
        Designed by <a href="https://bootstrapmade.com/">BootstrapMade</a>
      </div>
    </div>

  </footer><!-- /Footer -->

  <!-- Scroll to Top -->
  <a href="#" class="scroll-top d-flex align-items-center justify-content-center"><i class="bi bi-arrow-up-short"></i></a>

  <!-- Vendor JS Files -->
  <script src="{% static 'vendor/bootstrap/js/bootstrap.bundle.min.js'%}"></script>
  <script src="{% static 'vendor/aos/aos.js'%}"></script>
  <script src="{% static 'vendor/swiper/swiper-bundle.min.js'%}"></script>
  <script src="{% static 'vendor/php-email-form/validate.js'%}"></script>

  <!-- Main JS File -->
  <script src="{% static 'js/main.js'%}"></script>

</body>
</html>
